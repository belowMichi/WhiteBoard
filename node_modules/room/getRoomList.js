/**
 * Created by Administrator on 2016/1/24.
 */
var mysql=require('mysql');

function connectServer(){

    var client=mysql.createConnection({
        host:'localhost',
        user:'root',
        password:'root',
        database:'node'
    })

    return client;
}


function  selectFun(client,roomId,callback){
    //client为一个mysql连接对象
    client.query('select password from room where roomId="'+roomId+'"',function(err,results,fields){
        if(err) throw err;

        callback(results);
    });
}

function  showFun(client,callback){
    //client为一个mysql连接对象
    client.query('select * from room',function(err,results,fields){
        if(err) throw err;

        callback(results);
    });
}
function insertFun(client , roomId , roomName , roomPassword,callback){
    client.query('insert into user value(?,?)', [roomId, roomName,roomPassword], function(err,result){
        if( err ){
            console.log( "error:" + err.message);
            return err;
        }
        callback(err);
    });
}

exports.connect = connectServer;
exports.showFun  = showFun;
exports.selectFun  = selectFun;
exports.insertFun = insertFun;